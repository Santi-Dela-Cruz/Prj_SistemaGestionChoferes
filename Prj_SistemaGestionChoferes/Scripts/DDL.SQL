CREATE TABLE ADMINISTRADOR (
    ADMIN_ID INTEGER PRIMARY KEY AUTOINCREMENT,
    ADMIN_USUARIO VARCHAR(50) NOT NULL,
    ADMIN_NOMBRE VARCHAR(50) NOT NULL,
    ADMIN_APELLIDO VARCHAR(50) NOT NULL,
    ADMIN_CORREO VARCHAR(50) NOT NULL,
    ADMIN_CONTRASENA VARCHAR(50) NOT NULL,
    ADMIN_FECHA_INGRESO DATE NOT NULL,
    ADMIN_HORA_INGRESO TIME NOT NULL,
    ADMIN_CARGO VARCHAR(50) NOT NULL,
    ADMIN_TELEFONO VARCHAR(50) NOT NULL,
    ADMIN_DIRECCION VARCHAR(50) NOT NULL,
    ESTADO CHAR(1) DEFAULT 'A' CHECK (ESTADO IN ('A', 'X')),
    UNIQUE(ADMIN_CORREO, ADMIN_CONTRASENA, ADMIN_USUARIO, ADMIN_TELEFONO),
    CONSTRAINT CHK_ADMIN_ESTADO CHECK (ESTADO IN ('A', 'X'))
);

CREATE TABLE CHOFER (
    CHOFER_ID INTEGER PRIMARY KEY AUTOINCREMENT,
    CHOFER_CEDULA VARCHAR(10) NOT NULL,
    CHOFER_NOMBRE VARCHAR(100) NOT NULL,
    CHOFER_APELLIDO VARCHAR(100) NOT NULL,
    CHOFER_TELEFONO VARCHAR(10) NOT NULL,
    CHOFER_DIRECCION VARCHAR(50) NOT NULL,
    CHOFER_CORREO VARCHAR(50) NOT NULL,
    CHOFER_CATEGORIA_LICENCIA VARCHAR(50) NOT NULL,
    CHOFER_FECHA_VENCIMIENTO_LICENCIA DATE NOT NULL,
    ESTADO CHAR(1) DEFAULT 'A' CHECK (ESTADO IN ('A', 'X')),
    UNIQUE(CHOFER_CEDULA, CHOFER_TELEFONO, CHOFER_CORREO),
    CONSTRAINT CHK_CHOFER_ESTADO CHECK (ESTADO IN ('A', 'X'))
);

CREATE TABLE HUELLA_DIGITAL (
    HUELLA_ID INTEGER PRIMARY KEY AUTOINCREMENT,
    CHOFER_ID INTEGER NOT NULL,
    HUELLA_CODIGO VARCHAR(50) NOT NULL,
    ESTADO CHAR(1) DEFAULT 'A' CHECK (ESTADO IN ('A', 'X')),
    UNIQUE(HUELLA_CODIGO),
    CONSTRAINT FK_HUELLA_CHOFER FOREIGN KEY (CHOFER_ID) REFERENCES CHOFER (CHOFER_ID),
    CONSTRAINT CHK_HUELLA_ESTADO CHECK (ESTADO IN ('A', 'X'))
);

CREATE TABLE MODIFICACION (
    MODIFICACION_ID INTEGER PRIMARY KEY AUTOINCREMENT,
    ADMIN_ID INTEGER NOT NULL,
    CHOFER_ID_MODIFICADO INTEGER NOT NULL,
    MODIFICACION_FECHA VARCHAR(50) NOT NULL,
    MODIFICACION_HORA VARCHAR(50) NOT NULL,
    MODIFICACION_ACCION VARCHAR(50) NOT NULL,
    ESTADO CHAR(1) DEFAULT 'A' CHECK (ESTADO IN ('A', 'X')),
    CONSTRAINT FK_MODIFICACION_ADMIN FOREIGN KEY (ADMIN_ID) REFERENCES ADMINISTRADOR (ADMIN_ID),
    CONSTRAINT FK_MODIFICACION_CHOFER FOREIGN KEY (CHOFER_ID_MODIFICADO) REFERENCES CHOFER (CHOFER_ID),
    CONSTRAINT CHK_MODIFICACION_ESTADO CHECK (ESTADO IN ('A', 'X'))
);

CREATE TABLE PENALIZACION (
    PENALIZACION_ID INTEGER PRIMARY KEY AUTOINCREMENT,
    CHOFER_ID INTEGER NOT NULL,
    INFRACCIONES INTEGER NOT NULL,
    PENALIZACION_DETALLE VARCHAR(50) NOT NULL,
    ESTADO CHAR(1) DEFAULT 'A' CHECK (ESTADO IN ('A', 'X')),
    CONSTRAINT FK_PENALIZACION_CHOFER FOREIGN KEY (CHOFER_ID) REFERENCES CHOFER (CHOFER_ID),
    CONSTRAINT CHK_PENALIZACION_ESTADO CHECK (ESTADO IN ('A', 'X'))
);

CREATE TABLE REGISTRO_ESTADO (
    REGISTRO_ESTADO_ID INTEGER PRIMARY KEY AUTOINCREMENT,
    CHOFER_ID INTEGER NOT NULL,
    ESTADO_CHOFER VARCHAR(50) DEFAULT NULL,
    AUTORIZACION INTEGER NOT NULL,
    REGISTRO_FECHA DATE NOT NULL,
    REGISTRO_HORA TIME NOT NULL,
    ESTADO CHAR(1) DEFAULT 'A' CHECK (ESTADO IN ('A', 'X')),
    CONSTRAINT FK_REGISTRO_ESTADO_CHOFER FOREIGN KEY (CHOFER_ID) REFERENCES CHOFER (CHOFER_ID),
    CONSTRAINT CHK_REGISTRO_ESTADO CHECK (ESTADO IN ('A', 'X'))
);

CREATE TABLE RUTA (
    RUTA_ID INTEGER PRIMARY KEY AUTOINCREMENT,
    CHOFER_ID INTEGER NOT NULL,
    RUTA_NOMBRE VARCHAR(50) NOT NULL,
    ESTADO CHAR(1) DEFAULT 'A' CHECK (ESTADO IN ('A', 'X')),
    UNIQUE(RUTA_NOMBRE),
    CONSTRAINT FK_RUTA_CHOFER FOREIGN KEY (CHOFER_ID) REFERENCES CHOFER (CHOFER_ID),
    CONSTRAINT CHK_RUTA_ESTADO CHECK (ESTADO IN ('A', 'X'))
);

CREATE TABLE VEHICULO (
    VEHICULO_ID INTEGER PRIMARY KEY AUTOINCREMENT,
    CHOFER_ID INTEGER NOT NULL,
    VEHICULO_PLACA VARCHAR(8) NOT NULL,
    VEHICULO_TIPO VARCHAR(50) NOT NULL,
    VEHICULO_MARCA VARCHAR(50) NOT NULL,
    VEHICULO_MODELO VARCHAR(50) NOT NULL,
    ESTADO CHAR(1) DEFAULT 'A' CHECK (ESTADO IN ('A', 'X')),
    UNIQUE(VEHICULO_PLACA),
    CONSTRAINT FK_VEHICULO_CHOFER FOREIGN KEY (CHOFER_ID) REFERENCES CHOFER (CHOFER_ID),
    CONSTRAINT CHK_VEHICULO_ESTADO CHECK (ESTADO IN ('A', 'X'))
);